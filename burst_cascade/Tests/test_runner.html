<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <title>Burst Cascade - Achievement Test Runner</title>
    <style>
        body {
            font-family: sans-serif;
            padding: 20px;
        }

        #log {
            white-space: pre-wrap;
            background: #f0f0f0;
            padding: 10px;
            border: 1px solid #ccc;
        }

        .pass {
            color: green;
            font-weight: bold;
        }

        .fail {
            color: red;
            font-weight: bold;
        }
    </style>
</head>

<body>
    <h1>Achievement Framework v5 Verification</h1>
    <div id="log"></div>

    <!-- Hidden game elements to satisfy main.js constructor -->
    <div style="display: none;">
        <canvas id="game-canvas"></canvas>
        <div id="player-select">
            <div class="toggle-btn selected" data-value="pvc"></div>
        </div>
        <div id="size-select">
            <div class="toggle-btn selected" data-value="regular"></div>
        </div>
        <div id="ai-level-select">
            <div class="toggle-btn selected" data-value="easy"></div>
            <div id="ai-level-group"></div>
        </div>
        <button id="help-btn"></button>
        <button id="start-help-btn"></button>
        <button id="game-start-btn"></button>
        <button id="restart-btn"></button>
        <button id="help-close-btn"></button>
        <button class="help-back-btn"></button>
        <button id="achievements-btn"></button>
        <button id="ach-close-btn"></button>
        <button id="achievements-back-btn"></button>
        <button id="achievement-reset-btn"></button>
        <button id="ach-back-btn"></button>
        <button id="title-btn"></button>
        <button id="back-btn"></button>
        <button id="peek-board-btn"></button>
        <div id="help-modal"></div>
        <div id="achievements-content"></div>
        <div id="achievement-modal"></div>
        <div id="achievement-list"></div>
        <div id="overlay-container"></div>
        <div id="victory-overlay"></div>
        <div id="victory-title"></div>
        <div id="victory-message"></div>
        <div id="victory-stats"></div>
        <div id="achievement-notification"></div>
        <div id="turn-display"></div>
        <div id="p1-energy"></div>
        <div id="p2-energy"></div>
        <div id="p1-cores"></div>
        <div id="p2-cores"></div>
        <div id="achievement-percent"></div>
        <table id="achievements-table">
            <tbody></tbody>
        </table>
        <div id="overlay"></div>
        <div id="help-content"></div>
        <div id="mode-selection-content"></div>
        <div id="game-over-content"></div>
        <div id="ai-thinking-overlay"></div>
    </div>

    <!-- Load Game Scripts -->
    <script src="../map.js"></script>
    <script src="../achievements.js"></script>
    <script src="../ai.js"></script>
    <script src="../main.js"></script>
    <script src="test_achievements.js"></script>

    <script>
        const log = document.getElementById('log');
        const originalLog = console.log;
        const originalError = console.error;

        console.log = (...args) => {
            log.innerHTML += '<div>' + args.map(a => typeof a === 'object' ? JSON.stringify(a) : a).join(' ') + '</div>';
            originalLog.apply(console, args);
        };
        console.error = (...args) => {
            log.innerHTML += '<div class="fail">' + args.map(a => typeof a === 'object' ? JSON.stringify(a) : a).join(' ') + '</div>';
            originalError.apply(console, args);
        };

        window.onload = async () => {
            if (window.runAchievementTest) {
                await window.runAchievementTest();
            } else {
                console.error("Test function not found!");
            }
        };
    </script>
</body>

</html>