# BURST CASCADE 仕様書

## 1. 基本情報
- **アプリ名**: BURST CASCADE (バースト・カスケード)
- **バージョン**: 4.7.32
- **ジャンル**: 連鎖爆発ストラテジー
- **概要**:
  純粋なエネルギーの結晶体「ヘキサグリッド」を舞台に、エネルギーの注入と爆発（Burst）、そして連鎖（Cascade）を駆使して、対立する勢力の「共鳴中枢（Core）」を奪還・無効化する戦略ゲーム。
  本作のオーディオは「状況連動型ダイナミック・シンセシス」を採用し、静寂と衝撃の対比、そしてコア残数に同期した音階変化を特徴とする。

---

### BGMシステム (Dynamic Rhythmic Engine)
本作のBGMは、シンセシスによるリズムとアンビエンスの組み合わせで構成されている。

- **勝利演出 (Drum Finish)**:
  - 楽曲の締めくくりのような、タイトで重厚なドラムフィニッシュ。無駄な余韻を排し、小気味よい「ドン！」という響きでゲームを締めくくる。
- **状況連動型スケーリング**:
  - **音色のソフト化**: プレイ中の音はTriangle波を主体とした極めて静かでまろやかな音色（P1：影の木琴調、P2：高揚感のあるベル調）。
  - **コア連動ピッチ**: 各勢力の残りコア数が減るに従い、リズムの音階が段階的に上昇し、聴覚的な緊張感を高める。
- **ピンチ状態 (Pinch)**:
  - いずれかのプレイヤーのコアが残り1つになると、BPMが上昇し、警報音と重いドローンが加わる緊急状態へ遷移。
- **動的アクセント (Algorithmic Accents)**:
  - 確率に基づいた「ゆらぎ」がリアルタイムに生成される。
- **リズムによる勝敗演出**:
  - **勝利 (Resonant Gravitas swell)**: 重厚なサブベースと倍音豊かなファンファーレ。演奏終了後は完全に無音化（ワンショット再生）。
  - **敗北 (Glitch Breakdown)**: リズムが歪みながら停止していく。

---

## 3. 機能一覧

### ゲーム設定
- **PLAYERS**:
  - **1P vs CPU (PvC)**: プレイヤー対AI
  - **2P LOCAL (PvP)**: ローカル対戦
- **AI LEVEL** (PvCのみ):
  - **EASY** / **NORMAL** / **HARD**
- **MAP SIZE**:
  - **MINI** / **REGULAR**
- **BGM SETTING**:
  - **ON / OFF**: タイトル画面にて切り替え可能。設定は `localStorage` に永続化される。
  - **設定の永続化**: 選択されたモード、AIレベル、マップサイズ、サウンド設定は、**ゲーム開始時**にブラウザの `localStorage` に保存され、次回起動時に自動的に復元される。

### 実績システム (Achievements)
- ゲームプレイを通じて解除される実績機能。
- 難易度ごとに達成状況を記録し、進捗率を表示。

### 演出・機能
- **Web Audio API** によるダイナミック・シンセシス音響。
- **アニメーション**: 落下エフェクト、リプルエフェクト、放物線を描く再構築ドット演出。
- **Peek Board**: オーバーレイ表示中に盤面を確認する機能。

## 4. 技術スタック
- **Frontend**: HTML5, CSS3, Vanilla JavaScript (ES6 Modules)
- **Sound**: Web Audio API (Manual Synthesis & Scheduling)
- **Testing**: Jest (jsdom environment)

## 5. ファイル構成概要
- `index.html`: エントリーポイント、UI構造
- `burst_cascade/`
  - `main.js`: ゲームループ、イベントハンドリング、Gameクラス
  - `map.js`: HexMapクラス（盤面管理）
  - `ai.js`: AIロジック
  - `achievements.js`: 実績管理
  - `tutorial.js`: チュートリアル・ヘルプ描画
  - `style.css`: ゲームスタイル定義
  - `achievement_style.css`: 実績画面スタイル
  - `Documents/`: ドキュメント格納
  - `Tests/`: テストコード
